{"ast":null,"code":"var _jsxFileName = \"/Users/amaljose/MyOwn/PersonalProjects/Mashinga/src/Mashinga/index.js\";\nimport React from \"react\";\nimport { MashingaContainer } from \"./styles\";\nimport Body from \"./components/Body\";\nimport { Context } from \"./Store\";\nimport Splash from \"./components/pages/Splash\";\nimport { appBasePath } from \"./config/paths\";\nimport SecureService from \"./services/Secure\";\nimport { setUserDetails } from \"./Store/user/actions\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction Mashinga(props) {\n  const {\n    state,\n    dispatch\n  } = React.useContext(Context);\n  const [checkLocalToken, setLocalTokenStatus] = React.useState(false);\n  let history = useHistory();\n  React.useEffect(() => {\n    if (window.location.pathname !== appBasePath + \"login\") {\n      let localToken = localStorage.getItem(\"token\");\n      SecureService.verifyToken(localToken).then(retrivedUser => {\n        setUserDetails(retrivedUser)(dispatch);\n        setLocalTokenStatus(true);\n      }).catch(err => {\n        debugger;\n\n        if (window.location.pathname.includes(appBasePath) && window.location.pathname !== appBasePath + \"login\") {\n          history.push(appBasePath + \"login?redirect=\" + window.location.pathname);\n        }\n\n        setLocalTokenStatus(true);\n      });\n    }\n  }, []);\n\n  if (!checkLocalToken) {\n    return /*#__PURE__*/React.createElement(MashingaContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(Splash, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 7\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(MashingaContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }));\n}\n\nexport default Mashinga;","map":{"version":3,"sources":["/Users/amaljose/MyOwn/PersonalProjects/Mashinga/src/Mashinga/index.js"],"names":["React","MashingaContainer","Body","Context","Splash","appBasePath","SecureService","setUserDetails","useHistory","Mashinga","props","state","dispatch","useContext","checkLocalToken","setLocalTokenStatus","useState","history","useEffect","window","location","pathname","localToken","localStorage","getItem","verifyToken","then","retrivedUser","catch","err","includes","push"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,iBAAT,QAAkC,UAAlC;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,SAASC,OAAT,QAAwB,SAAxB;AACA,OAAOC,MAAP,MAAmB,2BAAnB;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,OAAOC,aAAP,MAA0B,mBAA1B;AACA,SAASC,cAAT,QAA+B,sBAA/B;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACvB,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAsBZ,KAAK,CAACa,UAAN,CAAiBV,OAAjB,CAA5B;AACA,QAAM,CAACW,eAAD,EAAkBC,mBAAlB,IAAyCf,KAAK,CAACgB,QAAN,CAAe,KAAf,CAA/C;AACA,MAAIC,OAAO,GAAGT,UAAU,EAAxB;AACAR,EAAAA,KAAK,CAACkB,SAAN,CAAgB,MAAM;AACpB,QAAGC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,KAA6BhB,WAAW,GAAG,OAA9C,EAAsD;AACpD,UAAIiB,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAjB;AACAlB,MAAAA,aAAa,CAACmB,WAAd,CAA0BH,UAA1B,EACGI,IADH,CACSC,YAAD,IAAkB;AACpBpB,QAAAA,cAAc,CAACoB,YAAD,CAAd,CAA6Bf,QAA7B;AACAG,QAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACH,OAJH,EAKGa,KALH,CAKUC,GAAD,IAAS;AACd;;AACA,YACEV,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAAyBS,QAAzB,CAAkCzB,WAAlC,KACAc,MAAM,CAACC,QAAP,CAAgBC,QAAhB,KAA6BhB,WAAW,GAAG,OAF7C,EAGE;AACAY,UAAAA,OAAO,CAACc,IAAR,CAAa1B,WAAW,GAAG,iBAAd,GAAkCc,MAAM,CAACC,QAAP,CAAgBC,QAA/D;AACD;;AACDN,QAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACD,OAdH;AAeD;AAEF,GApBD,EAoBG,EApBH;;AAqBA,MAAG,CAACD,eAAJ,EAAoB;AAClB,wBAAO,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACL,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADK,CAAP;AAGD;;AACD,sBAAO,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACL,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADK,CAAP;AAGD;;AACD,eAAeL,QAAf","sourcesContent":["import React from \"react\";\nimport { MashingaContainer } from \"./styles\";\nimport Body from \"./components/Body\";\nimport { Context } from \"./Store\";\nimport Splash from \"./components/pages/Splash\";\nimport { appBasePath } from \"./config/paths\";\nimport SecureService from \"./services/Secure\";\nimport { setUserDetails } from \"./Store/user/actions\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction Mashinga(props) {\n  const { state, dispatch } = React.useContext(Context);\n  const [checkLocalToken, setLocalTokenStatus] = React.useState(false);\n  let history = useHistory();\n  React.useEffect(() => {\n    if(window.location.pathname !== appBasePath + \"login\"){\n      let localToken = localStorage.getItem(\"token\");\n      SecureService.verifyToken(localToken)\n        .then((retrivedUser) => {\n            setUserDetails(retrivedUser)(dispatch);\n            setLocalTokenStatus(true);\n        })\n        .catch((err) => {\n          debugger;\n          if (\n            window.location.pathname.includes(appBasePath) &&\n            window.location.pathname !== appBasePath + \"login\"\n          ) {\n            history.push(appBasePath + \"login?redirect=\" + window.location.pathname);\n          }\n          setLocalTokenStatus(true);\n        });\n    }\n    \n  }, []);\n  if(!checkLocalToken){\n    return <MashingaContainer>\n      <Splash/>\n    </MashingaContainer>\n  }\n  return <MashingaContainer>\n    <Body/>\n  </MashingaContainer>;\n}\nexport default Mashinga;"]},"metadata":{},"sourceType":"module"}